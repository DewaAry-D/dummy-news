<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - DeNews</title>
    <link rel="stylesheet" href="/berita/style.css" />
</head>

<body>
    <!-- Sidebar -->
    <nav class="sidebar">
        <div class="logo">
            <a href="./dashboard" style="display: flex; justify-content: center;">
                <img src="/berita/img/logo.png" alt="Logo DeNews" />
            </a>
        </div>

        <ul class="nav-menu">
            <li class="nav-item">
                <a href="./dashboard" class="nav-link active">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                    Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a href="./list" class="nav-link">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="3" y1="9" x2="21" y2="9"></line>
                        <line x1="9" y1="21" x2="9" y2="9"></line>
                    </svg>
                    Manajemen Berita
                </a>
            </li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Statistik Atas -->
        <div class="stats-grid">
            <div class="card">
                <div class="stat-number">
                    <%= data.newsCount %>
                </div>
                <div class="stat-label text-blue">Jumlah Berita</div>
            </div>

            <div class="card">
                <div class="stat-number">
                    <%= data.totalYearlyVisitors %>
                </div>
                <div class="stat-label text-green">Total Pengunjung</div>
            </div>

            <div class="card">
                <div class="stat-number">
                    <%= data.categoryCount %>
                </div>
                <div class="stat-label text-orange">Kategori</div>
            </div>
        </div>

        <!-- Grafik -->
        <section class="chart-container">
            <div class="chart-header">
                <h2 class="chart-title">Statistik Pengunjung</h2>
                <select class="year-select">
                    <option>
                        <%= new Date().getFullYear() %>
                    </option>
                </select>
            </div>

            <div class="bar-chart">
                <% const months=["Jan", "Feb" , "Mar" , "Apr" , "Mei" , "Jun" , "Jul" , "Agt" , "Spt" , "Okt" , "Nov"
                    , "Des" ]; const maxValue=Math.max(...data.monthlyVisitors.map(v=> v.total), 1);
                    %>

                    <% months.forEach((monthName, index)=> {
                        const monthData = data.monthlyVisitors.find(v => v.month === index + 1);
                        const total = monthData ? monthData.total : 0;
                        const heightPercent = (total / maxValue) * 100;
                        %>
                        <div class="bar-wrapper">
                            <div class="bar" data-height="<%= Math.round(heightPercent) %>"
                                style="height: <%= Math.round(heightPercent) %>%">
                            </div>
                            <span class="bar-label">
                                <%= monthName %>
                            </span>
                        </div>
                        <% }) %>
            </div>
        </section>
    </main>
</body>

</html>